<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>命令模式2.0</title>
</head>
<body>
<button>1</button>
<button>2</button>
<button>3</button>
<script>
    ;(function(){
        //采用闭包模式改写
        var btn = document.querySelectorAll('button');
        var setCommand = function(el, command){
            el.onclick = function(){
                command.start();
            }
        }

        var MeaBar = {
            refresh: function(){
                console.log('refresh')
            }
        }
        var SubBar = {
            add: function(){
                console.log('add')
            },
            remove: function(){
                console.log('remove')
            }
        }

        var RefreshCommand = function(obj){
            return {
                start: function(){
                    obj.refresh()
                }
            }
        }


        var AddCommand = function(obj){
            return {
                start: function(){
                    obj.add();
                }
            }
        }

        var RemoveCommand = function(obj){
            return {
                start: function(){
                    obj.remove();
                }
            }
        }


        setCommand(btn[0],  RefreshCommand(MeaBar))
        setCommand(btn[1],  AddCommand(SubBar))
        setCommand(btn[2],  RemoveCommand(SubBar))
    })()
</script>
</body>
</html>